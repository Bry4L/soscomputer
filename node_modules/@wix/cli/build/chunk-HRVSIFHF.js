import { createRequire as _createRequire } from 'node:module';
const require = _createRequire(import.meta.url);
import{d as x,f as p}from"./chunk-NWEJ2BHT.js";import{a as P}from"./chunk-NX7YLKSA.js";import{b as u,f as _,g as S}from"./chunk-3JLE6D3G.js";import{g as q}from"./chunk-FCAB5YK5.js";import{c as h,e as R}from"./chunk-JOXYEZYT.js";import{c as L,e as T,i as s}from"./chunk-UO4ZAUJK.js";var I=L((pe,F)=>{"use strict";s();F.exports=function(e,r){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var a=e.length;if(a<=1)return e;var t="";if(a>4&&e[3]==="\\"){var n=e[2];(n==="?"||n===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),t="//")}var o=e.split(/[/\\]+/);return r!==!1&&o[o.length-1]===""&&o.pop(),t+o.join("/")}});s();var A;(function(e){e.VELO="VELO",e.VELO_ISOLATED="VELO_ISOLATED"})(A||(A={}));var m;(function(e){e.UNKNOWN_GRID_APP_LAYOUT="UNKNOWN_GRID_APP_LAYOUT",e.ONLINE="ONLINE",e.GITHUB="GITHUB",e.GITHUB_BLOCKS="GITHUB_BLOCKS"})(m||(m={}));var w;(function(e){e.UNKNOWN="UNKNOWN",e.GA="GA",e.RC="RC"})(w||(w={}));var y;(function(e){e.UNKNOWN="UNKNOWN",e.WIX_CLI="WIX_CLI"})(y||(y={}));var E;(function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"})(E||(E={}));s();import{readdir as J,readFile as U,stat as W}from"node:fs/promises";import{join as v}from"node:path";async function N(e,r=""){return(await Promise.all((await J(v(e,r))).map(async a=>{let t=v(r,a);return(await W(v(e,t))).isDirectory()?N(e,t):{path:t,content:await U(v(e,t),"utf-8")}}))).flat()}function Z(e){return e instanceof Error&&P(e)?.response?.data?.details?.applicationError?.code==="SITE_NOT_PUBLISHED"}s();var D={},b={},C={},G={};var M={},K={};function l(e){var r={"code._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"blocks._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"create.editorx":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/wix-code-lifecycle-service",destPath:""}]};return x(Object.assign(e,{domainToMappings:r}))}function oe(e){var r=p(M,{}),a=r.toJSON,t=r.fromJSON,n=p(K,{}).fromJSON;function o(f){var c=f.host,i=a(e),d={entityFqdn:"wix.velo.apps.v1.app",method:"POST",methodFqn:"wix.velo.apps.v1.LifecycleService.PagesDiff",url:l({protoPath:"/v1/pages-diff",data:i,host:c}),data:i,transformResponse:n,fallback:[{method:"POST",url:l({protoPath:"/v1/pages-diff",data:i,host:c}),data:i}]};return d}return o.fromReq=t,o.__isAmbassador=!0,o}function ae(e){var r=p(D,{}),a=r.toJSON,t=r.fromJSON,n=p(b,{}).fromJSON;function o(f){var c=f.host,i=a(e),d={entityFqdn:"wix.velo.apps.v1.app",method:"POST",methodFqn:"wix.velo.apps.v1.LifecycleService.CreateApp",url:l({protoPath:"/v1/apps",data:i,host:c}),data:i,transformResponse:n};return d}return o.fromReq=t,o.__isAmbassador=!0,o}function ie(e){var r=p(C,{}),a=r.toJSON,t=r.fromJSON,n=p(G,{}).fromJSON;function o(f){var c=f.host,i=a(e),d={entityFqdn:"wix.velo.apps.v1.app",method:"POST",methodFqn:"wix.velo.apps.v1.LifecycleService.DeployApp",url:l({protoPath:"/v1/apps/deploy",data:i,host:c}),data:i,transformResponse:n};return d}return o.fromReq=t,o.__isAmbassador=!0,o}s();import{join as O}from"node:path";import{readFile as B}from"node:fs/promises";var g=T(I(),1);async function k(e){try{return await B(e,"utf-8")}catch(r){throw new h({code:R.FailedToReadProjectFiles({cause:r}),cause:r})}}async function z(e){try{return await N(e)}catch(r){throw new h({code:R.FailedToReadProjectFiles({cause:r}),cause:r})}}async function V(e){return await q(O(e,_))?Promise.all([S,_].map(async r=>{let a=await k(O(e,r));return{path:r,content:a}})):[]}async function Re(e){let r=(await z(u(e))).map(t=>({content:t.content,path:(0,g.default)(O(u(""),t.path))})),a=await V(e);return{ignoreForbiddenPaths:!0,layout:m.GITHUB,files:r.concat(a)}}export{oe as a,ae as b,ie as c,A as d,m as e,w as f,y as g,I as h,Z as i,Re as j};
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=chunk-HRVSIFHF.js.map